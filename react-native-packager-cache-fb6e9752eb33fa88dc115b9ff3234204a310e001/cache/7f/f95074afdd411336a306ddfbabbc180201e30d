Object.defineProperty(exports,"__esModule",{value:true});var _react=require("react");var _react2=babelHelpers.interopRequireDefault(_react);
var _reactVr=require("react-vr");

var _styles=require("./styles");var _styles2=babelHelpers.interopRequireDefault(_styles);

var Easing=require('Easing');

var AnimatedSphere=_reactVr.Animated.createAnimatedComponent(_reactVr.Sphere);
var AnimatedBox=_reactVr.Animated.createAnimatedComponent(_reactVr.Box);var

Portal=function(_React$Component){babelHelpers.inherits(Portal,_React$Component);

function Portal(){babelHelpers.classCallCheck(this,Portal);var _this=babelHelpers.possibleConstructorReturn(this,(Portal.__proto__||Object.getPrototypeOf(Portal)).call(this));

_this.state={
animationRequestId:null,
animatedScale:new _reactVr.Animated.Value(1),
rotate:0,
opacity:new _reactVr.Animated.Value(0.75),
borderOpacity:new _reactVr.Animated.Value(0.2),
arrowOpacity:new _reactVr.Animated.Value(0.8)};return _this;

}babelHelpers.createClass(Portal,[{key:"componentDidMount",value:function componentDidMount()

{var _this2=this;
var step=function step(){
_this2.setState({rotate:_this2.state.rotate-1});
_this2.animationRequestId=requestAnimationFrame(step);
};
this.animationRequestId=requestAnimationFrame(step);
}},{key:"componentWillUnmount",value:function componentWillUnmount()

{
if(this.animationRequestId){
cancelAnimationFrame(this.animationRequestId);
}
}},{key:"mouseIn",value:function mouseIn()

{
_reactVr.Animated.parallel([
_reactVr.Animated.timing(
this.state.borderOpacity,
{
toValue:0,
duration:600,
easing:Easing.in}),


_reactVr.Animated.timing(
this.state.arrowOpacity,
{
toValue:0,
duration:600,
easing:Easing.in}),


_reactVr.Animated.timing(
this.state.opacity,
{
toValue:1,
duration:500,
easing:Easing.in}),


_reactVr.Animated.timing(
this.state.animatedScale,
{
toValue:2,
duration:450,
easing:Easing.in})]).


start();
}},{key:"mouseOut",value:function mouseOut()

{
_reactVr.Animated.parallel([
_reactVr.Animated.timing(
this.state.borderOpacity,
{
toValue:0.2,
duration:400,
easing:Easing.in}),


_reactVr.Animated.timing(
this.state.arrowOpacity,
{
toValue:0.8,
duration:600,
easing:Easing.in}),


_reactVr.Animated.timing(
this.state.opacity,
{
toValue:0.75,
duration:500,
easing:Easing.in}),


_reactVr.Animated.timing(
this.state.animatedScale,
{
toValue:1,
duration:450,
easing:Easing.in})]).


start();
}},{key:"render",value:function render()

{var _this3=this;var _props=
this.props,transformPortal=_props.transformPortal,place=_props.place;

return(
_react2.default.createElement(_reactVr.Animated.View,{
style:[
_styles2.default.view,
this.props.style,
{
transform:[].concat(babelHelpers.toConsumableArray(
transformPortal),[
{scale:this.state.animatedScale}])}]},




_react2.default.createElement(_reactVr.VrButton,{
onClick:function onClick(){return _this3.props.onClick(place);},
onEnter:function onEnter(){return _this3.mouseIn();},
onExit:function onExit(){return _this3.mouseOut();}},

_react2.default.createElement(AnimatedSphere,{
style:{
opacity:this.state.opacity,
transform:[
{translateY:0},
{rotateY:this.state.rotate}]},


texture:(0,_reactVr.asset)("/places/"+place+"/portal.jpg"),
radius:1.1,
widthSegments:20,
heightSegments:12}),

_react2.default.createElement(AnimatedSphere,{
style:{
opacity:this.state.borderOpacity,
transform:[
{translateY:0}]},


radius:1.4,
widthSegments:20,
heightSegments:12})),


_react2.default.createElement(AnimatedBox,{
texture:(0,_reactVr.asset)('icons/arrow.png'),
dimWidth:1,
dimDepth:1,
dimHeight:1,
style:{
opacity:this.state.arrowOpacity,
transform:[
{translateY:-2},
{rotateY:this.state.rotate}]}})));





}}]);return Portal;}(_react2.default.Component);exports.default=


Portal;